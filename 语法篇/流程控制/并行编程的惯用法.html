
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>并行编程的惯用法 · python攻略</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="hsz">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="结语.html" />
    
    
    <link rel="prev" href="多进程.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"repo":"hsz1273327/TutorialForPython","types":["star","watch","fork"],"size":"small"};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://blog.hszofficial.site/" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../工具链篇/">
            
                <a href="../../工具链篇/">
            
                    
                    工具链篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../../工具链篇/运行环境.html">
            
                <a href="../../工具链篇/运行环境.html">
            
                    
                    运行环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../../工具链篇/包的安装管理与分发.html">
            
                <a href="../../工具链篇/包的安装管理与分发.html">
            
                    
                    包的安装管理与分发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="../../工具链篇/交互环境jupyter/">
            
                <a href="../../工具链篇/交互环境jupyter/">
            
                    
                    交互环境jupyter
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.3.1" data-path="../../工具链篇/交互环境jupyter/基于web的可交互运行环境jupyter.html">
            
                <a href="../../工具链篇/交互环境jupyter/基于web的可交互运行环境jupyter.html">
            
                    
                    基于web的可交互运行环境jupyter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.2" data-path="../../工具链篇/交互环境jupyter/ipython与魔法命令/ipython与魔法命令.html">
            
                <a href="../../工具链篇/交互环境jupyter/ipython与魔法命令/ipython与魔法命令.html">
            
                    
                    ipython与魔法命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.3" data-path="../../工具链篇/交互环境jupyter/在Ipython_Notebook中的代码调试与优化.html">
            
                <a href="../../工具链篇/交互环境jupyter/在Ipython_Notebook中的代码调试与优化.html">
            
                    
                    在Ipython_Notebook中的代码调试与优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.4" data-path="../../工具链篇/交互环境jupyter/在ipykernel中使用异步接口.html">
            
                <a href="../../工具链篇/交互环境jupyter/在ipykernel中使用异步接口.html">
            
                    
                    在ipykernel中使用异步接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.5" data-path="../../工具链篇/交互环境jupyter/多进程并行计算.html">
            
                <a href="../../工具链篇/交互环境jupyter/多进程并行计算.html">
            
                    
                    多进程并行计算
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.6" data-path="../../工具链篇/交互环境jupyter/公开的jupyter_notebook服务.html">
            
                <a href="../../工具链篇/交互环境jupyter/公开的jupyter_notebook服务.html">
            
                    
                    公开的jupyter_notebook服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.7" data-path="../../工具链篇/交互环境jupyter/notebook格式转换工具.html">
            
                <a href="../../工具链篇/交互环境jupyter/notebook格式转换工具.html">
            
                    
                    notebook格式转换工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.8" data-path="../../工具链篇/交互环境jupyter/结语.html">
            
                <a href="../../工具链篇/交互环境jupyter/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="../../工具链篇/代码风格.html">
            
                <a href="../../工具链篇/代码风格.html">
            
                    
                    代码风格
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="../../工具链篇/docstring工具.html">
            
                <a href="../../工具链篇/docstring工具.html">
            
                    
                    docstring工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="../../工具链篇/静态类型检测.html">
            
                <a href="../../工具链篇/静态类型检测.html">
            
                    
                    静态类型检测
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="../../工具链篇/日志工具.html">
            
                <a href="../../工具链篇/日志工具.html">
            
                    
                    日志工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="../../工具链篇/调试工具.html">
            
                <a href="../../工具链篇/调试工具.html">
            
                    
                    调试工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="../../工具链篇/调用追踪与异常栈追踪.html">
            
                <a href="../../工具链篇/调用追踪与异常栈追踪.html">
            
                    
                    调用追踪与异常栈追踪
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="../../工具链篇/代码测试.html">
            
                <a href="../../工具链篇/代码测试.html">
            
                    
                    代码测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.11" data-path="../../工具链篇/部署服务.html">
            
                <a href="../../工具链篇/部署服务.html">
            
                    
                    部署服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.12" data-path="../../工具链篇/性能调优工具.html">
            
                <a href="../../工具链篇/性能调优工具.html">
            
                    
                    性能调优工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.13" data-path="../../工具链篇/结语.html">
            
                <a href="../../工具链篇/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../">
            
                <a href="../">
            
                    
                    语法篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../数据模型/">
            
                <a href="../数据模型/">
            
                    
                    数据模型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1.1" data-path="../数据模型/数据模型.html">
            
                <a href="../数据模型/数据模型.html">
            
                    
                    数据模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.2" data-path="../数据模型/变量引用与垃圾回收.html">
            
                <a href="../数据模型/变量引用与垃圾回收.html">
            
                    
                    变量引用与垃圾回收
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.3" data-path="../数据模型/结语.html">
            
                <a href="../数据模型/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../模块/">
            
                <a href="../模块/">
            
                    
                    模块
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.2.1" data-path="../模块/导入时与运行时.html">
            
                <a href="../模块/导入时与运行时.html">
            
                    
                    导入时与运行时
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.2" data-path="../模块/模块的预设字段.html">
            
                <a href="../模块/模块的预设字段.html">
            
                    
                    模块的预设字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.3" data-path="../模块/模块的加载流程.html">
            
                <a href="../模块/模块的加载流程.html">
            
                    
                    模块的加载流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.4" data-path="../模块/模块加载特殊内容.html">
            
                <a href="../模块/模块加载特殊内容.html">
            
                    
                    模块加载特殊内容
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.5" data-path="../模块/结语.html">
            
                <a href="../模块/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../文本与字节序/">
            
                <a href="../文本与字节序/">
            
                    
                    文本与字节序
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.3.1" data-path="../文本与字节序/文本和编码.html">
            
                <a href="../文本与字节序/文本和编码.html">
            
                    
                    文本和编码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.2" data-path="../文本与字节序/字节序列与内存视图.html">
            
                <a href="../文本与字节序/字节序列与内存视图.html">
            
                    
                    字节序列与内存视图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.3" data-path="../文本与字节序/字符串操作.html">
            
                <a href="../文本与字节序/字符串操作.html">
            
                    
                    字符串操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.4" data-path="../文本与字节序/文本模板.html">
            
                <a href="../文本与字节序/文本模板.html">
            
                    
                    文本模板
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.5" data-path="../文本与字节序/正则表达式.html">
            
                <a href="../文本与字节序/正则表达式.html">
            
                    
                    正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.6" data-path="../文本与字节序/序列化.html">
            
                <a href="../文本与字节序/序列化.html">
            
                    
                    序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.7" data-path="../文本与字节序/结语.html">
            
                <a href="../文本与字节序/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="./">
            
                <a href="./">
            
                    
                    流程控制
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.4.1" data-path="单线程同步流程控制.html">
            
                <a href="单线程同步流程控制.html">
            
                    
                    单线程同步流程控制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4.2" data-path="阻塞异步与协程.html">
            
                <a href="阻塞异步与协程.html">
            
                    
                    阻塞异步与协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4.3" data-path="多线程与GIL.html">
            
                <a href="多线程与GIL.html">
            
                    
                    多线程与GIL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4.4" data-path="多进程.html">
            
                <a href="多进程.html">
            
                    
                    多进程
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.1.4.5" data-path="并行编程的惯用法.html">
            
                <a href="并行编程的惯用法.html">
            
                    
                    并行编程的惯用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4.6" data-path="结语.html">
            
                <a href="结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../异常和警告.html">
            
                <a href="../异常和警告.html">
            
                    
                    异常和警告
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../内置容器/">
            
                <a href="../内置容器/">
            
                    
                    内置容器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.6.1" data-path="../内置容器/序列对象.html">
            
                <a href="../内置容器/序列对象.html">
            
                    
                    序列对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6.2" data-path="../内置容器/映射对象.html">
            
                <a href="../内置容器/映射对象.html">
            
                    
                    映射对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6.3" data-path="../内置容器/可迭代对象与生成器.html">
            
                <a href="../内置容器/可迭代对象与生成器.html">
            
                    
                    可迭代对象与生成器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6.4" data-path="../内置容器/结语.html">
            
                <a href="../内置容器/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="../函数/">
            
                <a href="../函数/">
            
                    
                    函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.7.1" data-path="../函数/函数是一等对象.html">
            
                <a href="../函数/函数是一等对象.html">
            
                    
                    函数是一等对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7.2" data-path="../函数/变量作用域与闭包.html">
            
                <a href="../函数/变量作用域与闭包.html">
            
                    
                    变量作用域与闭包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7.3" data-path="../函数/结语.html">
            
                <a href="../函数/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.8" data-path="../面向对象惯用法/">
            
                <a href="../面向对象惯用法/">
            
                    
                    面向对象惯用法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.8.1" data-path="../面向对象惯用法/python中的对象.html">
            
                <a href="../面向对象惯用法/python中的对象.html">
            
                    
                    python中的对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.2" data-path="../面向对象惯用法/协议与接口与抽象基类.html">
            
                <a href="../面向对象惯用法/协议与接口与抽象基类.html">
            
                    
                    协议,接口与抽象基类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.3" data-path="../面向对象惯用法/多重继承和Mixin.html">
            
                <a href="../面向对象惯用法/多重继承和Mixin.html">
            
                    
                    多重继承和Mixin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.4" data-path="../面向对象惯用法/自定义序列Vector.html">
            
                <a href="../面向对象惯用法/自定义序列Vector.html">
            
                    
                    自定义序列Vector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.5" data-path="../面向对象惯用法/结语.html">
            
                <a href="../面向对象惯用法/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.9" data-path="../元编程/">
            
                <a href="../元编程/">
            
                    
                    元编程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.9.1" data-path="../元编程/运算符重载.html">
            
                <a href="../元编程/运算符重载.html">
            
                    
                    运算符重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.2" data-path="../元编程/特性与描述符.html">
            
                <a href="../元编程/特性与描述符.html">
            
                    
                    特性与描述符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.3" data-path="../元编程/装饰器.html">
            
                <a href="../元编程/装饰器.html">
            
                    
                    装饰器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.4" data-path="../元编程/元类编程.html">
            
                <a href="../元编程/元类编程.html">
            
                    
                    元类编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.5" data-path="../元编程/import_hook.html">
            
                <a href="../元编程/import_hook.html">
            
                    
                    import_hook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.6" data-path="../元编程/动态编译.html">
            
                <a href="../元编程/动态编译.html">
            
                    
                    动态编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.7" data-path="../元编程/动态属性.html">
            
                <a href="../元编程/动态属性.html">
            
                    
                    动态属性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.8" data-path="../元编程/猴子补丁和热更新.html">
            
                <a href="../元编程/猴子补丁和热更新.html">
            
                    
                    猴子补丁和热更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.9" data-path="../元编程/结语.html">
            
                <a href="../元编程/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.10" data-path="../结语.html">
            
                <a href="../结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../基础应用篇/">
            
                <a href="../../基础应用篇/">
            
                    
                    基础应用篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../../基础应用篇/国际化/">
            
                <a href="../../基础应用篇/国际化/">
            
                    
                    国际化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="../../基础应用篇/国际化/字符编码判断.html">
            
                <a href="../../基础应用篇/国际化/字符编码判断.html">
            
                    
                    字符编码判断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.2" data-path="../../基础应用篇/国际化/国际化文本翻译.html">
            
                <a href="../../基础应用篇/国际化/国际化文本翻译.html">
            
                    
                    国际化文本翻译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.3" data-path="../../基础应用篇/国际化/时间日期处理.html">
            
                <a href="../../基础应用篇/国际化/时间日期处理.html">
            
                    
                    时间日期处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.4" data-path="../../基础应用篇/国际化/货币处理模块.html">
            
                <a href="../../基础应用篇/国际化/货币处理模块.html">
            
                    
                    货币处理模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5" data-path="../../基础应用篇/国际化/结语.html">
            
                <a href="../../基础应用篇/国际化/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../../基础应用篇/数据压缩与归档/">
            
                <a href="../../基础应用篇/数据压缩与归档/">
            
                    
                    数据压缩与归档
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="../../基础应用篇/数据压缩与归档/数据压缩解压.html">
            
                <a href="../../基础应用篇/数据压缩与归档/数据压缩解压.html">
            
                    
                    数据压缩解压
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="../../基础应用篇/数据压缩与归档/压缩归档.html">
            
                <a href="../../基础应用篇/数据压缩与归档/压缩归档.html">
            
                    
                    压缩归档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="../../基础应用篇/数据压缩与归档/结语.html">
            
                <a href="../../基础应用篇/数据压缩与归档/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../../基础应用篇/定时任务.html">
            
                <a href="../../基础应用篇/定时任务.html">
            
                    
                    定时任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../../基础应用篇/结构数据验证.html">
            
                <a href="../../基础应用篇/结构数据验证.html">
            
                    
                    结构数据验证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../../基础应用篇/调用子进程.html">
            
                <a href="../../基础应用篇/调用子进程.html">
            
                    
                    调用子进程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../输入输出篇/">
            
                <a href="../../输入输出篇/">
            
                    
                    输入输出篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../../输入输出篇/标准输入输出.html">
            
                <a href="../../输入输出篇/标准输入输出.html">
            
                    
                    标准输入输出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../../输入输出篇/文件与IO流.html">
            
                <a href="../../输入输出篇/文件与IO流.html">
            
                    
                    文件与IO流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../../输入输出篇/数据库读写.html">
            
                <a href="../../输入输出篇/数据库读写.html">
            
                    
                    数据库读写
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../../输入输出篇/接口服务/">
            
                <a href="../../输入输出篇/接口服务/">
            
                    
                    接口服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.4.1" data-path="../../输入输出篇/接口服务/RPC服务/">
            
                <a href="../../输入输出篇/接口服务/RPC服务/">
            
                    
                    RPC服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.4.1.1" data-path="../../输入输出篇/接口服务/RPC服务/XMLRPC接口服务.html">
            
                <a href="../../输入输出篇/接口服务/RPC服务/XMLRPC接口服务.html">
            
                    
                    XMLRPC接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.1.2" data-path="../../输入输出篇/接口服务/RPC服务/JSONRPC接口服务.md">
            
                <span>
            
                    
                    JSONRPC接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.1.3" data-path="../../输入输出篇/接口服务/RPC服务/GRpc接口服务.html">
            
                <a href="../../输入输出篇/接口服务/RPC服务/GRpc接口服务.html">
            
                    
                    GRpc接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.1.4" data-path="../../输入输出篇/接口服务/RPC服务/ZERORPC接口服务.html">
            
                <a href="../../输入输出篇/接口服务/RPC服务/ZERORPC接口服务.html">
            
                    
                    ZERORPC接口服务
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2.4.2" data-path="../../输入输出篇/接口服务/Http接口服务/">
            
                <a href="../../输入输出篇/接口服务/Http接口服务/">
            
                    
                    Http接口服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.4.2.1" data-path="../../输入输出篇/接口服务/Http接口服务/使用http客户端获取数据.html">
            
                <a href="../../输入输出篇/接口服务/Http接口服务/使用http客户端获取数据.html">
            
                    
                    使用http客户端获取数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.2.2" data-path="../../输入输出篇/接口服务/Http接口服务/使用Flask快速构建RESTful接口服务.html">
            
                <a href="../../输入输出篇/接口服务/Http接口服务/使用Flask快速构建RESTful接口服务.html">
            
                    
                    使用Flask快速构建RESTful接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.2.3" data-path="../../输入输出篇/接口服务/Http接口服务/使用Sanic构建异步的RESTful接口服务.html">
            
                <a href="../../输入输出篇/接口服务/Http接口服务/使用Sanic构建异步的RESTful接口服务.html">
            
                    
                    使用Sanic构建异步的RESTful接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.2.4" data-path="../../输入输出篇/接口服务/Http接口服务/结语.html">
            
                <a href="../../输入输出篇/接口服务/Http接口服务/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2.4.3" data-path="../../输入输出篇/接口服务/WebSocket接口服务/">
            
                <a href="../../输入输出篇/接口服务/WebSocket接口服务/">
            
                    
                    WebSocket接口服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.4.3.1" data-path="../../输入输出篇/接口服务/WebSocket接口服务/WebSocket接口服务和客户端.html">
            
                <a href="../../输入输出篇/接口服务/WebSocket接口服务/WebSocket接口服务和客户端.html">
            
                    
                    WebSocket接口服务和客户端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4.3.2" data-path="../../输入输出篇/接口服务/WebSocket接口服务/结语.html">
            
                <a href="../../输入输出篇/接口服务/WebSocket接口服务/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../../输入输出篇/结语.html">
            
                <a href="../../输入输出篇/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../信息安全篇/">
            
                <a href="../../信息安全篇/">
            
                    
                    信息安全篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../../信息安全篇/随机密码.html">
            
                <a href="../../信息安全篇/随机密码.html">
            
                    
                    随机密码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../../信息安全篇/摘要算法.html">
            
                <a href="../../信息安全篇/摘要算法.html">
            
                    
                    摘要算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../../信息安全篇/加密算法.html">
            
                <a href="../../信息安全篇/加密算法.html">
            
                    
                    加密算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../../信息安全篇/数字签名.html">
            
                <a href="../../信息安全篇/数字签名.html">
            
                    
                    数字签名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../../信息安全篇/动态口令.html">
            
                <a href="../../信息安全篇/动态口令.html">
            
                    
                    动态口令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.6" data-path="../../信息安全篇/结语.html">
            
                <a href="../../信息安全篇/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../">
            
                <a href="../../">
            
                    
                    人机交互篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="../../人机交互篇/使用python编写命令行工具.html">
            
                <a href="../../人机交互篇/使用python编写命令行工具.html">
            
                    
                    使用python编写命令行工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="../../人机交互篇/自定义交互式界面.html">
            
                <a href="../../人机交互篇/自定义交互式界面.html">
            
                    
                    自定义交互式界面
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="../../人机交互篇/GUI/">
            
                <a href="../../人机交互篇/GUI/">
            
                    
                    GUI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.3.1" data-path="../../人机交互篇/GUI/TK框架GUI编程的基本思路.html">
            
                <a href="../../人机交互篇/GUI/TK框架GUI编程的基本思路.html">
            
                    
                    TK框架GUI编程的基本思路
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3.2" data-path="../../人机交互篇/GUI/Tkinter的组件介绍.html">
            
                <a href="../../人机交互篇/GUI/Tkinter的组件介绍.html">
            
                    
                    Tkinter的组件介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3.3" data-path="../../人机交互篇/GUI/结合pandas和matplotlib制作数据科学GUI工具/结合pandas和matplotlib制作数据科学GUI工具.html">
            
                <a href="../../人机交互篇/GUI/结合pandas和matplotlib制作数据科学GUI工具/结合pandas和matplotlib制作数据科学GUI工具.html">
            
                    
                    结合pandas和matplotlib制作数据科学GUI工具
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4.4" data-path="../../人机交互篇/使用matplotlib做数据可视化/">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/">
            
                    
                    使用matplotlib做数据可视化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.4.1" data-path="../../人机交互篇/使用matplotlib做数据可视化/matplotlib的基本设置/matplotlib的基本设置.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/matplotlib的基本设置/matplotlib的基本设置.html">
            
                    
                    matplotlib的基本设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.2" data-path="../../人机交互篇/使用matplotlib做数据可视化/绘图工具pyplot/绘图工具pyplot.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/绘图工具pyplot/绘图工具pyplot.html">
            
                    
                    绘图工具pyplot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.3" data-path="../../人机交互篇/使用matplotlib做数据可视化/非结构网络/非结构网络.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/非结构网络/非结构网络.html">
            
                    
                    非结构网络
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.4" data-path="../../人机交互篇/使用matplotlib做数据可视化/桑基图/桑基图.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/桑基图/桑基图.html">
            
                    
                    桑基图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.5" data-path="../../人机交互篇/使用matplotlib做数据可视化/图片加载/图片加载.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/图片加载/图片加载.html">
            
                    
                    图片加载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.6" data-path="../../人机交互篇/使用matplotlib做数据可视化/保存图片/保存图片.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/保存图片/保存图片.html">
            
                    
                    保存图片
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.7" data-path="../../人机交互篇/使用matplotlib做数据可视化/控件.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/控件.html">
            
                    
                    控件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.8" data-path="../../人机交互篇/使用matplotlib做数据可视化/动画/动画.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/动画/动画.html">
            
                    
                    动画
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.9" data-path="../../人机交互篇/使用matplotlib做数据可视化/matplitlib结合web技术.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/matplitlib结合web技术.html">
            
                    
                    matplitlib结合web技术
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4.10" data-path="../../人机交互篇/使用matplotlib做数据可视化/结语.html">
            
                <a href="../../人机交互篇/使用matplotlib做数据可视化/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4.5" data-path="../../人机交互篇/结语.html">
            
                <a href="../../人机交互篇/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../数学与统计应用篇/">
            
                <a href="../../数学与统计应用篇/">
            
                    
                    数学与统计应用篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../数学与统计应用篇/使用标准库处理基本数学问题/使用标准库处理基本数学问题.html">
            
                <a href="../../数学与统计应用篇/使用标准库处理基本数学问题/使用标准库处理基本数学问题.html">
            
                    
                    使用标准库处理基本数学问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../数学与统计应用篇/numpy的高性能同构定长多维数组ndarray/numpy的高性能同构定长多维数组ndarray.html">
            
                <a href="../../数学与统计应用篇/numpy的高性能同构定长多维数组ndarray/numpy的高性能同构定长多维数组ndarray.html">
            
                    
                    numpy的高性能同构定长多维数组ndarray
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../数学与统计应用篇/使用numpy做科学计算/使用numpy做科学计算.html">
            
                <a href="../../数学与统计应用篇/使用numpy做科学计算/使用numpy做科学计算.html">
            
                    
                    使用numpy做科学计算
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../../数学与统计应用篇/结语.html">
            
                <a href="../../数学与统计应用篇/结语.html">
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../嵌入与扩展篇/">
            
                <a href="../../嵌入与扩展篇/">
            
                    
                    嵌入与扩展篇
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/">
            
                    
                    使用Cython优化python程序的性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1.1" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/Cython的简单介绍.html">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/Cython的简单介绍.html">
            
                    
                    Cython的简单介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.2" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/Cython的基本模式.html">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/Cython的基本模式.html">
            
                    
                    Cython的基本模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.3" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/静态化python模块.html">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/静态化python模块.html">
            
                    
                    静态化python模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.4" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/使用cython申明文件申明python源码类型.html">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/使用cython申明文件申明python源码类型.html">
            
                    
                    使用cython申明文件申明python源码类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.5" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/Cython的包装模式.html">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/Cython的包装模式.html">
            
                    
                    Cython的包装模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.6" data-path="../../嵌入与扩展篇/使用Cython优化python程序的性能/使用Cython扩展numpy.html">
            
                <a href="../../嵌入与扩展篇/使用Cython优化python程序的性能/使用Cython扩展numpy.html">
            
                    
                    使用Cython扩展numpy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../../嵌入与扩展篇/用numba为python写高性能C扩展.html">
            
                <a href="../../嵌入与扩展篇/用numba为python写高性能C扩展.html">
            
                    
                    用numba为python写高性能C扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../../嵌入与扩展篇/使用f2py用fortain给python写扩展.html">
            
                <a href="../../嵌入与扩展篇/使用f2py用fortain给python写扩展.html">
            
                    
                    使用f2py用fortain给python写扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="../../嵌入与扩展篇/结语.md">
            
                <span>
            
                    
                    结语
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../术语表.html">
            
                <a href="../../术语表.html">
            
                    
                    术语表
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >并行编程的惯用法</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;"><b>1. </b>&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;</a></li><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x9009;&#x62E9;"><b>1.1. </b>&#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x9009;&#x62E9;</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x5E38;&#x7528;&#x540C;&#x6B65;&#x673A;&#x5236;&#x539F;&#x8BED;"><b>1.2. </b>&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x5E38;&#x7528;&#x540C;&#x6B65;&#x673A;&#x5236;(&#x539F;&#x8BED;)</a></li><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x4FE1;&#x53F7;&#x91CF;-semaphore"><b>1.2.1. </b>&#x4FE1;&#x53F7;&#x91CF; Semaphore</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x9501;lock"><b>1.2.2. </b>&#x9501;Lock</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x4E8B;&#x4EF6;"><b>1.2.3. </b>&#x4E8B;&#x4EF6;</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x6761;&#x4EF6;condition"><b>1.2.4. </b>&#x6761;&#x4EF6;Condition</a></li></ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x961F;&#x5217;"><b>1.3. </b>&#x961F;&#x5217;</a></li></ul></ul></div><a href="#&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;"><a name="&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60EF;&#x7528;&#x6CD5;</h1>
<p>&#x4EBA;&#x4EEC;&#x901A;&#x5E38;&#x8BA4;&#x4E3A;&#x5E76;&#x884C;&#x7B49;&#x540C;&#x4E8E;&#x591A;&#x6838;,&#x4F46;&#x73B0;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x5728;&#x4E0D;&#x540C;&#x5C42;&#x6B21;&#x4E0A;&#x90FD;&#x4F7F;&#x7528;&#x4E86;&#x5E76;&#x884C;&#x6280;&#x672F;.&#x6BD4;&#x5982;&#x8BF4;,&#x5355;&#x6838;&#x7684;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x73B0;&#x4ECA;&#x4ECD;&#x80FD;&#x6BCF;&#x5E74;&#x4E0D;&#x65AD;&#x63D0;&#x5347;&#x7684;&#x539F;&#x56E0;&#x662F;--&#x5355;&#x6838;&#x5305;&#x542B;&#x7684;&#x6676;&#x4F53;&#x7BA1;&#x6570;&#x91CF;,&#x5982;&#x540C;&#x6469;&#x5C14;&#x5B9A;&#x5F8B;&#x9884;&#x6D4B;&#x7684;&#x90A3;&#x6837;&#x53D8;&#x5F97;&#x8D8A;&#x6765;&#x8D8A;&#x591A;,&#x800C;&#x5355;&#x6838;&#x5728;&#x4F4D;&#x7EA7;&#x548C;&#x6307;&#x4EE4;&#x7EA7;&#x4E24;&#x4E2A;&#x5C42;&#x6B21;&#x4E0A;&#x90FD;&#x80FD;&#x591F;&#x5E76;&#x884C;&#x5730;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x6676;&#x4F53;&#x7BA1;&#x8D44;&#x6E90;.</p>
<ul>
<li><p>&#x4F4D;&#x7EA7;(bit-level)&#x5E76;&#x884C;</p>
<p>  &#x4E3A;&#x4EC0;&#x4E48;32&#x4F4D;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x6BD4;8&#x4F4D;&#x8BA1;&#x7B97;&#x673A;&#x66F4;&#x5FEB;&#xFF1F;&#x56E0;&#x4E3A;&#x5E76;&#x884C;.&#x5BF9;&#x4E8E;&#x4E24;&#x4E2A;32&#x4F4D;&#x6570;&#x7684;&#x52A0;&#x6CD5;,8&#x4F4D;&#x8BA1;&#x7B97;&#x673A;&#x5FC5;&#x987B;&#x8FDB;&#x884C;&#x591A;&#x6B21;8&#x4F4D;&#x8BA1;&#x7B97;,&#x800C;32&#x4F4D;&#x8BA1;&#x7B97;&#x673A;&#x53EF;&#x4EE5;&#x4E00;&#x6B65;&#x5B8C;&#x6210;,&#x5373;&#x5E76;&#x884C;&#x5730;&#x5904;&#x7406;32&#x4F4D;&#x6570;&#x7684;4&#x5B57;&#x8282;.</p>
<p>  &#x8BA1;&#x7B97;&#x673A;&#x7684;&#x53D1;&#x5C55;&#x7ECF;&#x5386;&#x4E86;8&#x4F4D;&#x3001;16&#x4F4D;&#x3001;32&#x4F4D;,&#x73B0;&#x5728;&#x6B63;&#x5904;&#x4E8E;64&#x4F4D;&#x65F6;&#x4EE3;.&#x7136;&#x800C;&#x7531;&#x4F4D;&#x5347;&#x7EA7;&#x5E26;&#x6765;&#x7684;&#x6027;&#x80FD;&#x6539;&#x5584;&#x662F;&#x5B58;&#x5728;&#x74F6;&#x9888;&#x7684;,&#x8FD9;&#x4E5F;&#x6B63;&#x662F;&#x77ED;&#x671F;&#x5185;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x6B65;&#x5165;128&#x4F4D;&#x65F6;&#x4EE3;&#x7684;&#x539F;&#x56E0;.</p>
</li>
<li><p>&#x6307;&#x4EE4;&#x7EA7;(instruction-level)&#x5E76;&#x884C;</p>
<p>  &#x73B0;&#x4EE3;CPU&#x7684;&#x5E76;&#x884C;&#x5EA6;&#x5F88;&#x9AD8;,&#x5176;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6280;&#x672F;&#x5305;&#x62EC;&#x6D41;&#x6C34;&#x7EBF;&#x3001;&#x4E71;&#x5E8F;&#x6267;&#x884C;&#x548C;&#x731C;&#x6D4B;&#x6267;&#x884C;&#x7B49;.</p>
<p>  &#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x4E0D;&#x5173;&#x5FC3;&#x5904;&#x7406;&#x5668;&#x5185;&#x90E8;&#x5E76;&#x884C;&#x7684;&#x7EC6;&#x8282;,&#x56E0;&#x4E3A;&#x5C3D;&#x7BA1;&#x5904;&#x7406;&#x5668;&#x5185;&#x90E8;&#x7684;&#x5E76;&#x884C;&#x5EA6;&#x5F88;&#x9AD8;,&#x4F46;&#x662F;&#x7ECF;&#x8FC7;&#x7CBE;&#x5FC3;&#x8BBE;&#x8BA1;,&#x4ECE;&#x5916;&#x90E8;&#x770B;&#x4E0A;&#x53BB;&#x6240;&#x6709;&#x5904;&#x7406;&#x90FD;&#x50CF;&#x662F;&#x4E32;&#x884C;&#x7684;.</p>
<p>  &#x800C;&#x8FD9;&#x79CD;&quot;&#x770B;&#x4E0A;&#x53BB;&#x50CF;&#x4E32;&#x884C;&quot;&#x7684;&#x8BBE;&#x8BA1;&#x9010;&#x6E10;&#x53D8;&#x5F97;&#x4E0D;&#x9002;&#x7528;.&#x5904;&#x7406;&#x5668;&#x7684;&#x8BBE;&#x8BA1;&#x8005;&#x4EEC;&#x4E3A;&#x5355;&#x6838;&#x63D0;&#x5347;&#x901F;&#x5EA6;&#x53D8;&#x5F97;&#x8D8A;&#x6765;&#x8D8A;&#x56F0;&#x96BE;.&#x8FDB;&#x5165;&#x591A;&#x6838;&#x65F6;&#x4EE3;,&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x9762;&#x5BF9;&#x7684;&#x60C5;&#x51B5;&#x662F;--&#x65E0;&#x8BBA;&#x662F;&#x8868;&#x9762;&#x4E0A;&#x8FD8;&#x662F;&#x5B9E;&#x8D28;&#x4E0A;,&#x6307;&#x4EE4;&#x90FD;&#x4E0D;&#x518D;&#x4E32;&#x884C;&#x6267;&#x884C;&#x4E86;.</p>
</li>
<li><p>&#x6570;&#x636E;&#x7EA7;(data)&#x5E76;&#x884C;</p>
<p>  &#x6570;&#x636E;&#x7EA7;&#x5E76;&#x884C;(&#x4E5F;&#x79F0;&#x4E3A;&quot;&#x5355;&#x6307;&#x4EE4;&#x591A;&#x6570;&#x636E;&quot;,SIMD)&#x67B6;&#x6784;,&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x5730;&#x5728;&#x5927;&#x91CF;&#x6570;&#x636E;&#x4E0A;&#x65BD;&#x52A0;&#x540C;&#x4E00;&#x64CD;&#x4F5C;.&#x8FD9;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x89E3;&#x51B3;&#x6240;&#x6709;&#x95EE;&#x9898;,&#x4F46;&#x5728;&#x9002;&#x5408;&#x7684;&#x573A;&#x666F;&#x5374;&#x53EF;&#x4EE5;&#x5927;&#x5C55;&#x8EAB;&#x624B;.</p>
<p>  &#x56FE;&#x50CF;&#x5904;&#x7406;&#x5C31;&#x662F;&#x4E00;&#x79CD;&#x9002;&#x5408;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7EA7;&#x5E76;&#x884C;&#x7684;&#x573A;&#x666F;.&#x6BD4;&#x5982;&#x4E3A;&#x4E86;&#x589E;&#x52A0;&#x56FE;&#x7247;&#x4EAE;&#x5EA6;&#x5C31;&#x9700;&#x8981;&#x589E;&#x52A0;&#x6BCF;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x7684;&#x4EAE;&#x5EA6;.&#x73B0;&#x4EE3;GPU(&#x56FE;&#x5F62;&#x5904;&#x7406;&#x5668;)&#x4E5F;&#x56E0;&#x56FE;&#x50CF;&#x5904;&#x7406;&#x7684;&#x7279;&#x70B9;&#x800C;&#x6F14;&#x5316;&#x6210;&#x4E86;&#x6781;&#x5176;&#x5F3A;&#x5927;&#x7684;&#x6570;&#x636E;&#x5E76;&#x884C;&#x5904;&#x7406;&#x5668;.</p>
</li>
<li><p>&#x4EFB;&#x52A1;&#x7EA7;(task-level)&#x5E76;&#x884C;</p>
<p>  &#x7EC8;&#x4E8E;&#x6765;&#x5230;&#x4E86;&#x5927;&#x5BB6;&#x6240;&#x8BA4;&#x4E3A;&#x7684;&#x5E76;&#x884C;&#x5F62;&#x5F0F;&#x2014;&#x2014;&#x591A;&#x5904;&#x7406;&#x5668;.&#x4ECE;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;,&#x591A;&#x5904;&#x7406;&#x5668;&#x67B6;&#x6784;&#x6700;&#x660E;&#x663E;&#x7684;&#x5206;&#x7C7B;&#x7279;&#x5F81;&#x662F;&#x5176;&#x5185;&#x5B58;&#x6A21;&#x578B;(&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x6A21;&#x578B;&#x6216;&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;&#x6A21;&#x578B;).</p>
<ul>
<li><p>&#x5BF9;&#x4E8E;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x7684;&#x591A;&#x5904;&#x7406;&#x5668;&#x7CFB;&#x7EDF;,&#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x90FD;&#x80FD;&#x8BBF;&#x95EE;&#x6574;&#x4E2A;&#x5185;&#x5B58;,&#x5904;&#x7406;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x8FDB;&#x884C;.</p>
</li>
<li><p>&#x5BF9;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;&#x7684;&#x591A;&#x5904;&#x7406;&#x5668;&#x7CFB;&#x7EDF;,&#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x5185;&#x5B58;,&#x5904;&#x7406;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8FDB;&#x884C;.</p>
<p>&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x901A;&#x4FE1;&#x6BD4;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x66F4;&#x7B80;&#x5355;&#x66F4;&#x5FEB;&#x901F;,&#x6240;&#x4EE5;&#x7528;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x7F16;&#x7A0B;&#x5F80;&#x5F80;&#x66F4;&#x5BB9;&#x6613;.&#x7136;&#x800C;&#x5F53;&#x5904;&#x7406;&#x5668;&#x4E2A;&#x6570;&#x9010;&#x6E10;&#x589E;&#x591A;,&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x5C31;&#x4F1A;&#x906D;&#x9047;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x2014;&#x2014;&#x6B64;&#x65F6;&#x4E0D;&#x5F97;&#x4E0D;&#x8F6C;&#x5411;&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;.&#x5982;&#x679C;&#x8981;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x5BB9;&#x9519;&#x7CFB;&#x7EDF;,&#x5C31;&#x8981;&#x4F7F;&#x7528;&#x591A;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x4EE5;&#x89C4;&#x907F;&#x786C;&#x4EF6;&#x6545;&#x969C;&#x5BF9;&#x7CFB;&#x7EDF;&#x7684;&#x5F71;&#x54CD;,&#x6B64;&#x65F6;&#x4E5F;&#x5FC5;&#x987B;&#x501F;&#x52A9;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;.</p>
</li>
</ul>
</li>
</ul>
<h2 id="&#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x9009;&#x62E9;"><a name="&#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x9009;&#x62E9;" class="anchor-navigation-ex-anchor" href="#&#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x9009;&#x62E9;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x9009;&#x62E9;</h2>
<p>&#x9996;&#x5148;python&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x548C;&#x534F;&#x7A0B;&#x90FD;&#x662F;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x5F0F;&#x7684;,&#x800C;&#x591A;&#x8FDB;&#x7A0B;&#x867D;&#x7136;&#x662F;&#x5728;&#x540C;&#x4E00;&#x673A;&#x5668;&#x4E0A;,&#x4F46;&#x5404;&#x4E2A;&#x8FDB;&#x7A0B;&#x95F4;&#x5E76;&#x4E0D;&#x5171;&#x4EAB;&#x5185;&#x5B58;,&#x56E0;&#x6B64;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7684;.</p>
<p>&#x770B;&#x8D77;&#x6765;&#x591A;&#x8FDB;&#x7A0B;,&#x591A;&#x7EBF;&#x7A0B;,&#x534F;&#x7A0B;&#x90FD;&#x662F;&#x4EE5;&#x5E76;&#x884C;&#x7684;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#x7684;,&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x8BE5;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6280;&#x672F;&#x5462;?</p>
<ul>
<li><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x901A;&#x8FC7;&#x5206;&#x6790;&#x76EE;&#x6807;&#x529F;&#x80FD;&#x6765;&#x9009;&#x62E9;,&#x5982;&#x679C;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E3B;&#x8981;&#x662F;&#x8BA1;&#x7B97;&#x5BC6;&#x96C6;&#x578B;&#x7684;,&#x6BD4;&#x5982;&#x662F;&#x5E76;&#x884C;&#x8BA1;&#x7B97;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x662F;&#x5426;&#x662F;&#x8D28;&#x6570;&#x8FD9;&#x7C7B;,&#x90A3;&#x4E48;&#x6CA1;&#x5F97;&#x9009;,&#x53EA;&#x6709;&#x591A;&#x8FDB;&#x7A0B;&#x624D;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x6700;&#x5927;&#x5316;&#x5229;&#x7528;cpu&#x8D44;&#x6E90;,&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x90FD;&#x53EA;&#x80FD;&#x8DD1;&#x6EE1;&#x4E00;&#x4E2A;cpu&#x6838;&#x5FC3;.</p>
</li>
<li><p>&#x63A5;&#x7740;&#x5C31;&#x662F;&#x4E3B;&#x8981;&#x662F;io&#x64CD;&#x4F5C;&#x7684;&#x4EFB;&#x52A1;&#x4E86;,io&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x9996;&#x9009;&#x5F53;&#x7136;&#x662F;&#x534F;&#x7A0B;,&#x4E5F;&#x53EA;&#x6709;&#x534F;&#x7A0B;&#x53EF;&#x4EE5;&#x641E;&#x5B9A;<a href="http://www.kegel.com/c10k.html" target="_blank">10k</a>&#x95EE;&#x9898;,&#x4F46;python&#x7684;&#x9ED8;&#x8BA4;I/O&#x591A;&#x662F;&#x540C;&#x6B65;I/O,&#x56E0;&#x6B64;&#x5728;&#x6240;&#x9700;&#x4F9D;&#x8D56;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x591A;&#x7EBF;&#x7A0B;&#x65B9;&#x5F0F;&#x66FF;&#x4EE3;.</p>
</li>
</ul>
<p>&#x534F;&#x7A0B;&#x548C;&#x591A;&#x7EBF;&#x7A0B;&#x90FD;&#x6700;&#x591A;&#x8DD1;&#x6EE1;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;,&#x4F46;&#x5176;&#x673A;&#x5236;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x4E00;&#x6837;&#x7684;,&#x534F;&#x7A0B;&#x662F;&#x7528;&#x6237;&#x7EC4;&#x7EC7;&#x4EE3;&#x7801;,&#x56E0;&#x6B64;&#x662F;&#x5199;&#x6210;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x5F02;&#x6B65;&#x6267;&#x884C;,&#x8BF4;&#x767D;&#x4E86;&#x8FD8;&#x662F;&#x5728;&#x987A;&#x5E8F;&#x6267;&#x884C;,&#x53EA;&#x662F;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;&#x54EA;&#x6BB5;&#x4EE3;&#x7801;&#x4F1A;&#x5728;&#x534F;&#x7A0B;&#x95F4;&#x8DF3;&#x8F6C;&#x6267;&#x884C;,&#x6253;&#x4E2A;&#x6BD4;&#x65B9;&#x6709;&#x70B9;&#x50CF;&#x62C9;&#x94FE;,&#x53EA;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x9F7F;&#x574F;&#x4E86;,&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x5C31;&#x4F1A;&#x5361;&#x4F4F;.</p>
<p>&#x4F46;&#x591A;&#x7EBF;&#x7A0B;&#x5219;&#x5B8C;&#x5168;&#x4E0D;&#x540C;,&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5361;&#x6B7B;&#x4E86;&#x5E76;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;.</p>
<h2 id="&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x5E38;&#x7528;&#x540C;&#x6B65;&#x673A;&#x5236;&#x539F;&#x8BED;"><a name="&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x5E38;&#x7528;&#x540C;&#x6B65;&#x673A;&#x5236;&#x539F;&#x8BED;" class="anchor-navigation-ex-anchor" href="#&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x5E38;&#x7528;&#x540C;&#x6B65;&#x673A;&#x5236;&#x539F;&#x8BED;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x5E38;&#x7528;&#x540C;&#x6B65;&#x673A;&#x5236;(&#x539F;&#x8BED;)</h2>
<p>python&#x5305;&#x542B;&#x591A;&#x79CD;&#x540C;&#x6B65;&#x673A;&#x5236;,&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x4F7F;&#x7528;&#x601D;&#x8DEF;&#x4E0A;&#x662F;&#x4E00;&#x81F4;&#x7684;,&#x56E0;&#x6B64;&#x65E0;&#x8BBA;&#x662F;&#x534F;&#x7A0B;,&#x7EBF;&#x7A0B;&#x8FD8;&#x662F;&#x8FDB;&#x7A0B;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;,&#x53EA;&#x662F;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x5757;&#x4F1A;&#x6709;&#x4E9B;&#x8BB8;&#x4E0D;&#x540C;,&#x7528;&#x9014;&#x4E5F;&#x4F1A;&#x6709;&#x5199;&#x4E0D;&#x540C;</p>
<h3 id="&#x4FE1;&#x53F7;&#x91CF;-semaphore"><a name="&#x4FE1;&#x53F7;&#x91CF;-semaphore" class="anchor-navigation-ex-anchor" href="#&#x4FE1;&#x53F7;&#x91CF;-semaphore"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x4FE1;&#x53F7;&#x91CF; Semaphore</h3>
<p>&#x5728;&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x4E2D;,&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x4E0D;&#x540C;&#x7684;&#x8FC7;&#x7A0B;(&#x7EBF;&#x7A0B;/&#x8FDB;&#x7A0B;/&#x534F;&#x7A0B;)&#x540C;&#x65F6;&#x5BF9;&#x4E00;&#x4E2A;&#x516C;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x4FEE;&#x6539;,&#x9700;&#x8981;&#x8FDB;&#x884C;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x91CF;(&#x901A;&#x5E38;&#x662F;1).&#x4FE1;&#x53F7;&#x91CF;&#x540C;&#x6B65;&#x57FA;&#x4E8E;&#x5185;&#x90E8;&#x8BA1;&#x6570;&#x5668;,&#x6BCF;&#x8C03;&#x7528;&#x4E00;&#x6B21;acquire(),&#x8BA1;&#x6570;&#x5668;&#x51CF;1;&#x6BCF;&#x8C03;&#x7528;&#x4E00;&#x6B21;release(),&#x8BA1;&#x6570;&#x5668;&#x52A0;1.&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x5C0F;&#x4E8E;0.&#x5F53;&#x8BA1;&#x6570;&#x5668;&#x4E3A;0&#x65F6;.acquire()&#x8C03;&#x7528;&#x88AB;&#x963B;&#x585E;,&#x76F4;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6765;&#x8C03;&#x7528;release().Semaphore&#x652F;&#x6301;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x534F;&#x8BAE;</p>
<p>Semaphore&#x7684;&#x63A5;&#x53E3;&#x6709;&#x4E24;&#x4E2A;:</p>
<ul>
<li><code>acquire()</code> &#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x4FE1;&#x53F7;&#x91CF;,&#x534F;&#x7A0B;&#x4E2D;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x4E2A;&#x534F;&#x7A0B;</li>
<li><code>release()</code> &#x91CA;&#x653E;&#x4E00;&#x4E2A;&#x4FE1;&#x53F7;&#x91CF;</li>
<li><strong><code>locked()</code> &#x534F;&#x7A0B;&#x4E2D;&#x72EC;&#x6709;,&#x7528;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x88AB;&#x9501;&#x5B9A;</strong></li>
</ul>
<p>&#x4FE1;&#x53F7;&#x91CF;&#x6709;&#x4E24;&#x79CD;:</p>
<ul>
<li><p>Semaphore </p>
<p>  &#x6807;&#x51C6;&#x4FE1;&#x53F7;&#x91CF;</p>
</li>
<li><p>BoundedSemaphore</p>
<p>  &#x6709;&#x754C;&#x4FE1;&#x53F7;&#x91CF;,&#x5B83;&#x4F1A;&#x68C0;&#x67E5;&#x5185;&#x90E8;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;,&#x5E76;&#x4FDD;&#x8BC1;&#x5B83;&#x4E0D;&#x4F1A;&#x5927;&#x4E8E;&#x521D;&#x59CB;&#x503C;,&#x5982;&#x679C;&#x8D85;&#x4E86;,&#x5C31;&#x5F15;&#x53D1;&#x4E00;&#x4E2A;<code>ValueError</code></p>
</li>
</ul>
<p>&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;,semaphore&#x7528;&#x4E8E;&#x5B88;&#x62A4;&#x9650;&#x5236;&#x8BBF;&#x95EE;(&#x4F46;&#x4E0D;&#x9650;&#x4E8E;1)&#x7684;&#x8D44;&#x6E90;,&#x5982;&#x679C;<code>semaphore</code>&#x88AB;<code>release()</code>&#x8FC7;&#x591A;&#x6B21;,&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B58;&#x5728;bug.</p>
<p>&#x4FE1;&#x53F7;&#x91CF;&#x5728;&#x7EBF;&#x7A0B;,&#x8FDB;&#x7A0B;,&#x534F;&#x7A0B;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x5757;&#x5E76;&#x4E0D;&#x4E00;&#x6837;:</p>
<ul>
<li><p>&#x534F;&#x7A0B;--<code>asynico.Semaphore(value=1, *, loop=None)</code></p>
</li>
<li><p>&#x7EBF;&#x7A0B;--<code>threading.Semaphore(value=1)</code></p>
</li>
<li><p>&#x8FDB;&#x7A0B;--<code>multiprocessing.Semaphore([value])</code></p>
</li>
</ul>
<p>&#x534F;&#x7A0B;&#x7248;&#x672C;</p>
<pre><code>import aiohttp
import asyncio
NUMBERS = range(12)
URL = &apos;http://httpbin.org/get?a={}&apos;
sema = asyncio.Semaphore(3)
async def fetch_async(a):
    async with aiohttp.request(&apos;GET&apos;, URL.format(a)) as r:
        data = await r.json()
    return data[&apos;args&apos;][&apos;a&apos;]

async def print_result(a):
    async with sema:
        r = await fetch_async(a)
        print(&apos;fetch({}) = {}&apos;.format(a, r))
#loop = asyncio.new_event_loop()
#asyncio.set_event_loop(loop)
loop = asyncio.get_event_loop()
f = asyncio.wait([print_result(num) for num in NUMBERS])
loop.run_until_complete(f)
</code></pre><pre><code>fetch(3) = 3
fetch(4) = 4
fetch(9) = 9
fetch(10) = 10
fetch(1) = 1
fetch(6) = 6
fetch(5) = 5
fetch(11) = 11
fetch(0) = 0
fetch(2) = 2
fetch(7) = 7
fetch(8) = 8





({&lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;,
  &lt;Task finished coro=&lt;print_result() done, defined at &lt;ipython-input-1-02b773a0950a&gt;:11&gt; result=None&gt;},
 set())
</code></pre><p>&#x591A;&#x7EBF;&#x7A0B;&#x7248;&#x672C;</p>
<pre><code>import time
from random import random
from threading import Thread, Semaphore
sema = Semaphore(3)
def foo(tid):
    with sema:
        print(&apos;{} acquire sema&apos;.format(tid))
        wt = random() * 2
        time.sleep(wt)
    print(&apos;{} release sema&apos;.format(tid))
threads = []
for i in range(5):
    t = Thread(target=foo, args=(i,))
    threads.append(t)
    t.start()
for t in threads:
    t.join()
</code></pre><pre><code>0 acquire sema
1 acquire sema
2 acquire sema
2 release sema3 acquire sema

0 release sema
4 acquire sema
3 release sema
4 release sema
1 release sema
</code></pre><p>&#x591A;&#x8FDB;&#x7A0B;</p>
<pre><code>%%writefile src/semaphore.py
from multiprocessing import Process, Semaphore

def foo(tid,sema):
    import time
    from random import random
    with sema:
        print(&apos;{} acquire sema&apos;.format(tid))
        wt = random() * 2
        time.sleep(wt)
    print(&apos;{} release sema&apos;.format(tid))

if __name__ == &quot;__main__&quot;:
    sema = Semaphore(3)
    processes = []
    for i in range(5):
        t = Process(target=foo, args=(i,sema))
        processes.append(t)

    for t in processes:     
        t.start()
    for t in processes:
        t.join()
</code></pre><pre><code>Overwriting src/semaphore.py
</code></pre><pre><code>!python src/semaphore.py
</code></pre><pre><code>0 acquire sema
1 acquire sema
2 acquire sema
2 release sema
3 acquire sema
0 release sema
4 acquire sema
1 release sema
3 release sema
4 release sema
</code></pre><h3 id="&#x9501;lock"><a name="&#x9501;lock" class="anchor-navigation-ex-anchor" href="#&#x9501;lock"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. &#x9501;Lock</h3>
<p>Lock&#x4E5F;&#x53EF;&#x4EE5;&#x53EB;&#x505A;&#x4E92;&#x65A5;&#x9501;,&#x5176;&#x5B9E;&#x76F8;&#x5F53;&#x4E8E;&#x4FE1;&#x53F7;&#x91CF;&#x4E3A;1.</p>
<p>&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x9501;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x7528;&#x4E8E;&#x9501;&#x5B9A;&#x8BFB;&#x5199;,&#x4EE5;&#x786E;&#x8BA4;&#x540C;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x8BBF;&#x95EE;.</p>
<p>python&#x4E2D;&#x9501;&#x6709;&#x4E24;&#x79CD;</p>
<ul>
<li><p>Lock</p>
<p>  &#x6807;&#x51C6;&#x9501;</p>
</li>
<li><p>RLock</p>
<p>  &#x53EF;&#x91CD;&#x5165;&#x9501;,&#x53EF;&#x4EE5;&#x7531;&#x540C;&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#x591A;&#x6B21;&#x83B7;&#x53D6;.&#x5728;&#x5185;&#x90E8;,&#x9664;&#x4E86;&#x539F;&#x59CB;&#x9501;&#x4F7F;&#x7528;&#x7684;&#x9501;&#x5B9A;/&#x89E3;&#x9501;&#x72B6;&#x6001;&#x4E4B;&#x5916;,&#x5B83;&#x8FD8;&#x4F7F;&#x7528;&quot;&#x62E5;&#x6709;&#x8FC7;&#x7A0B;&quot;&#x548C;&quot;&#x9012;&#x5F52;&#x7EA7;&#x522B;&quot;&#x7684;&#x6982;&#x5FF5;.&#x5728;&#x9501;&#x5B9A;&#x72B6;&#x6001;&#x4E0B;,&#x67D0;&#x4E9B;&#x8FC7;&#x7A0B;&#x62E5;&#x6709;&#x9501;;&#x5728;&#x89E3;&#x9501;&#x72B6;&#x6001;&#x4E0B;,&#x6CA1;&#x6709;&#x7EBF;&#x7A0B;&#x62E5;&#x6709;&#x5B83;.</p>
</li>
</ul>
<p>&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E2A;&#x4E0D;&#x52A0;&#x9501;&#x7684;&#x4F8B;&#x5B50;:</p>
<pre><code>import time
from threading import Thread
value = 0
def getlock():
    global value
    new = value + 1
    time.sleep(0.001)  # &#x4F7F;&#x7528;sleep&#x8BA9;&#x7EBF;&#x7A0B;&#x6709;&#x673A;&#x4F1A;&#x5207;&#x6362;
    value = new
threads = []
for i in range(100):
    t = Thread(target=getlock)
    t.start()
    threads.append(t)
for t in threads:
    t.join()
print(value)
</code></pre><pre><code>10
</code></pre><p>&#x4E0D;&#x52A0;&#x9501;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x7ED3;&#x679C;&#x4F1A;&#x8FDC;&#x8FDC;&#x7684;&#x5C0F;&#x4E8E;100.&#x90A3;&#x6211;&#x4EEC;&#x52A0;&#x4E0A;&#x4E92;&#x65A5;&#x9501;&#x770B;&#x770B;</p>
<pre><code>import time
from threading import Thread, Lock
value = 0
lock = Lock()
def getlock():
    global value
    with lock:
        new = value + 1
        time.sleep(0.001)
        value = new
threads = []
for i in range(100):
    t = Thread(target=getlock)
    t.start()
    threads.append(t)
for t in threads:
    t.join()
print(value)
</code></pre><pre><code>100
</code></pre><p>&#x9501;&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x4FE1;&#x53F7;&#x91CF;,&#x5B83;&#x7684;&#x63A5;&#x53E3;&#x4E0E;Semaphore&#x4E00;&#x81F4;.&#x5728;&#x7EBF;&#x7A0B;,&#x8FDB;&#x7A0B;,&#x534F;&#x7A0B;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x5757;&#x5206;&#x522B;&#x4E3A;:</p>
<ul>
<li><p>&#x534F;&#x7A0B;--<code>asynico.Lock(*,loop=None)</code></p>
</li>
<li><p>&#x7EBF;&#x7A0B;--<code>threading.Lock(value=1)</code></p>
</li>
<li><p>&#x8FDB;&#x7A0B;--<code>multiprocessing.Lock([value])</code></p>
</li>
</ul>
<p>&#x5728;&#x534F;&#x7A0B;&#x4E2D;,&#x5B9E;&#x9645;&#x4E0A;&#x534F;&#x7A0B;&#x5E76;&#x6CA1;&#x6709;&#x62A2;&#x5360;&#x8D44;&#x6E90;&#x7684;&#x60C5;&#x51B5;,&#x56E0;&#x6B64;&#x6B64;&#x5904;&#x7684;&#x9501;&#x66F4;&#x591A;&#x7684;&#x662F;&#x7528;&#x6765;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x7684;&#x53D8;&#x91CF;&#x9501;&#x5B9A;&#x4E00;&#x4E9B;&#x6D41;&#x7A0B;&#x7528;</p>
<pre><code>import asyncio
import functools
def unlock(lock):
    print(&apos;callback releasing lock&apos;)
    lock.release()
async def test(locker, lock):
    print(&apos;{} waiting for the lock&apos;.format(locker))
    with await lock:
        print(&apos;{} acquired lock&apos;.format(locker))
    print(&apos;{} released lock&apos;.format(locker))
async def main(loop):
    lock = asyncio.Lock()
    await lock.acquire()
    loop.call_later(0.1, functools.partial(unlock, lock))
    await asyncio.wait([test(&apos;l1&apos;, lock), test(&apos;l2&apos;, lock)])

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
loop.run_until_complete(main(loop))
loop.close()
</code></pre><pre><code>l2 waiting for the lock
l1 waiting for the lock
callback releasing lock
l2 acquired lock
l2 released lock
l1 acquired lock
l1 released lock
</code></pre><p>&#x800C;&#x9488;&#x5BF9;&#x4E8E;&#x591A;&#x8FDB;&#x7A0B;,&#x9501;&#x540C;&#x6837;&#x8D77;&#x5230;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x4FE1;&#x53F7;&#x7684;&#x4F5C;&#x7528;,&#x6BD4;&#x5982;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x5904;&#x7406;&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;,&#x5C31;&#x9700;&#x8981;&#x52A0;&#x9501;&#x6765;&#x9650;&#x5236;</p>
<pre><code>%%writefile src/lock.py
import multiprocessing  
import sys  

def worker_with(lock, f):  
    with lock:  
        with open(f,&quot;a+&quot;) as fs:
            fs.write(&apos;Lock acquired via with\n&apos;)  

if __name__ == &apos;__main__&apos;:
    f = &quot;source/file.txt&quot;  
    lock = multiprocessing.Lock()  
    w = multiprocessing.Process(target=worker_with, args=(lock, f))  
    w.start()  
    w.join()
</code></pre><pre><code>Overwriting src/lock.py
</code></pre><pre><code>!python src/lock.py
</code></pre><h3 id="&#x4E8B;&#x4EF6;"><a name="&#x4E8B;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x4E8B;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. &#x4E8B;&#x4EF6;</h3>
<p>&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#x53D1;&#x9001;/&#x4F20;&#x9012;&#x4E8B;&#x4EF6;,&#x6240;&#x8C13;&#x4E8B;&#x4EF6;&#x662F;&#x6307;&#x7684;&#x4E00;&#x4E2A;&#x4FDD;&#x5B58;&#x6807;&#x8BB0;&#x72B6;&#x6001;&#x7684;&#x5BF9;&#x8C61;,&#x5982;&#x679C;&#x5185;&#x90E8;&#x6807;&#x8BB0;&#x4E3A;True&#x5219;&#x8868;&#x793A;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x4E86;,&#x53CD;&#x4E4B;&#x5C31;&#x662F;&#x6CA1;&#x53D1;&#x751F;</p>
<p>&#x4E8B;&#x4EF6;&#x7684;&#x63A5;&#x53E3;&#x5305;&#x62EC;:</p>
<ul>
<li>clear()</li>
</ul>
<p>&#x4E8B;&#x4EF6;&#x5185;&#x90E8;&#x6807;&#x8BB0;&#x4E3A;False</p>
<ul>
<li>is_set()</li>
</ul>
<p>&#x8FD4;&#x56DE;&#x4E8B;&#x4EF6;&#x7684;&#x5185;&#x90E8;&#x6807;&#x8BB0;</p>
<ul>
<li>set()</li>
</ul>
<p>&#x8C03;&#x7528;&#x5219;&#x8BBE;&#x7F6E;&#x5185;&#x90E8;&#x6807;&#x8BB0;&#x4E3A;True</p>
<ul>
<li>wait()</li>
</ul>
<p>&#x7B49;&#x5F85;&#x4E8B;&#x4EF6;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;True,&#x534F;&#x7A0B;&#x4E2D;&#x8BE5;&#x63A5;&#x53E3;&#x4E3A;&#x534F;&#x7A0B;</p>
<p>&#x53E6;&#x5916;&#x7684;&#x8FC7;&#x7A0B;&#x7B49;&#x5F85;&#x4E8B;&#x4EF6;&#x7684;&#x89E6;&#x53D1;.&#x6211;&#x4EEC;&#x7528;&#x300C;&#x751F;&#x4EA7;&#x8005;/&#x6D88;&#x8D39;&#x8005;&#x300D;&#x6A21;&#x578B;&#x7684;&#x4F8B;&#x5B50;.</p>
<p>&#x534F;&#x7A0B;</p>
<pre><code>import asyncio
import random


async def produce(event, n):
    for x in range(1, n + 1):
        # produce an item
        print(&apos;producing {}/{}&apos;.format(x, n))
        # simulate i/o operation using sleep
        await asyncio.sleep(random.random())
        l.append(x)
        event.set()


async def consume(event):
    while True:

        item = await event.wait()
        if item == False:
            break

        integer = l.pop()
        print(&apos;{} popped from list &apos;.format(integer))
        event.clear()
        await asyncio.sleep(random.random())

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
l = []
event = asyncio.Event(loop=loop)
producer_coro = produce(event, 10)
consumer_coro = consume(event)
loop.run_until_complete(asyncio.gather(producer_coro, consumer_coro))
loop.close()
</code></pre><pre><code>producing 1/10
producing 2/10
1 popped from list 
producing 3/10
2 popped from list 
producing 4/10
3 popped from list 
producing 5/10
4 popped from list 
producing 6/10
5 popped from list 
producing 7/10
producing 8/10
7 popped from list 
producing 9/10
8 popped from list 
producing 10/10
9 popped from list 
10 popped from list 



---------------------------------------------------------------------------

KeyboardInterrupt                         Traceback (most recent call last)

&lt;ipython-input-1-66684945b853&gt; in &lt;module&gt;()
     31 producer_coro = produce(event, 10)
     32 consumer_coro = consume(event)
---&gt; 33 loop.run_until_complete(asyncio.gather(producer_coro, consumer_coro))
     34 loop.close()


~/anaconda3/lib/python3.6/asyncio/base_events.py in run_until_complete(self, future)
    452         future.add_done_callback(_run_until_complete_cb)
    453         try:
--&gt; 454             self.run_forever()
    455         except:
    456             if new_task and future.done() and not future.cancelled():


~/anaconda3/lib/python3.6/asyncio/base_events.py in run_forever(self)
    419             events._set_running_loop(self)
    420             while True:
--&gt; 421                 self._run_once()
    422                 if self._stopping:
    423                     break


~/anaconda3/lib/python3.6/asyncio/base_events.py in _run_once(self)
   1393                            timeout * 1e3, dt * 1e3)
   1394         else:
-&gt; 1395             event_list = self._selector.select(timeout)
   1396         self._process_events(event_list)
   1397 


~/anaconda3/lib/python3.6/selectors.py in select(self, timeout)
    575             ready = []
    576             try:
--&gt; 577                 kev_list = self._kqueue.control(None, max_ev, timeout)
    578             except InterruptedError:
    579                 return ready


KeyboardInterrupt: 
</code></pre><pre><code>import time
import asyncio
from random import randint,choice

TIMEOUT = 2
async def consumer(name,event, l):
    if await event.wait():
        try:
            integer = l.pop()
            print(&apos;{} popped from list by {}&apos;.format(integer, name))
            event.clear()  # &#x91CD;&#x7F6E;&#x4E8B;&#x4EF6;&#x72B6;&#x6001;
        except IndexError:  # &#x4E3A;&#x4E86;&#x8BA9;&#x521A;&#x542F;&#x52A8;&#x65F6;&#x5BB9;&#x9519;
            pass


async def producer():
    for i in range(1,10):
        interger = randint(10, 100)
        yield interger

async def main():
    event = asyncio.Event()
    l = []
    async for i in producer():
        l.append(i)
        print(&apos;{} appended to list &apos;.format(i))
        event.set() # &#x8BBE;&#x7F6E;&#x4E8B;&#x4EF6;
        consumers = [consumer( name,event ,l)
                 for _, name in enumerate((&apos;c1&apos;, &apos;c2&apos;))]

        await choice(consumers)
        await asyncio.sleep(1)


loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)

loop.run_until_complete(main())
loop.close()
</code></pre><pre><code>85 appended to list 
85 popped from list by c1
67 appended to list 
67 popped from list by c2


/Users/huangsizhe/anaconda3/lib/python3.6/site-packages/ipykernel_launcher.py:29: RuntimeWarning: coroutine &apos;consumer&apos; was never awaited


66 appended to list 
66 popped from list by c2
81 appended to list 
81 popped from list by c2
57 appended to list 
57 popped from list by c2
97 appended to list 
97 popped from list by c2
53 appended to list 
53 popped from list by c1
43 appended to list 
43 popped from list by c2
24 appended to list 
24 popped from list by c2


/Users/huangsizhe/anaconda3/lib/python3.6/asyncio/events.py:145: RuntimeWarning: coroutine &apos;consumer&apos; was never awaited
  self._callback(*self._args)
</code></pre><p>&#x7EBF;&#x7A0B;</p>
<pre><code>import time
import threading
from random import randint

TIMEOUT = 2
def consumer(event, l):
    t = threading.currentThread()
    while 1:
        try:
            event_is_set = event.wait(TIMEOUT)
        except Exception as e:
            print(e)
            break
        if event_is_set:
            try:
                integer = l.pop()
                print(&apos;{} popped from list by {}&apos;.format(integer, t.name))
                event.clear()  # &#x91CD;&#x7F6E;&#x4E8B;&#x4EF6;&#x72B6;&#x6001;
            except IndexError:  # &#x4E3A;&#x4E86;&#x8BA9;&#x521A;&#x542F;&#x52A8;&#x65F6;&#x5BB9;&#x9519;
                pass
        else:
            break
def producer(event, l):
    t = threading.currentThread()
    for i in range(10):
        integer = randint(10, 100)
        l.append(integer)
        print(&apos;{} appended to list by {}&apos;.format(integer, t.name))
        event.set() # &#x8BBE;&#x7F6E;&#x4E8B;&#x4EF6;
        time.sleep(1)

event = threading.Event()
l = []
threads = []
for name in (&apos;consumer1&apos;, &apos;consumer2&apos;):
    t = threading.Thread(name=name, target=consumer, args=(event, l))
    t.start()
    threads.append(t)
p = threading.Thread(name=&apos;producer1&apos;, target=producer, args=(event, l))
p.start()
threads.append(p)
for t in threads:
    t.join()
</code></pre><pre><code>23 appended to list by producer1
23 popped from list by consumer1
80 appended to list by producer1
80 popped from list by consumer1
67 appended to list by producer1
67 popped from list by consumer1
49 appended to list by producer1
49 popped from list by consumer1
96 appended to list by producer1
96 popped from list by consumer1
91 appended to list by producer1
91 popped from list by consumer2
55 appended to list by producer1
55 popped from list by consumer2
29 appended to list by producer1
29 popped from list by consumer1
31 appended to list by producer1
31 popped from list by consumer1
36 appended to list by producer1
36 popped from list by consumer2
</code></pre><h3 id="&#x6761;&#x4EF6;condition"><a name="&#x6761;&#x4EF6;condition" class="anchor-navigation-ex-anchor" href="#&#x6761;&#x4EF6;condition"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. &#x6761;&#x4EF6;Condition</h3>
<p>&#x6761;&#x4EF6;&#x7528;&#x4E8E;&#x4FE1;&#x53F7;&#x901A;&#x4FE1;,&#x5B83;&#x7684;&#x9664;&#x4E86;&#x62E5;&#x6709;&#x9501;&#x7684;&#x6240;&#x6709;&#x63A5;&#x53E3;&#x5916;,&#x8FD8;&#x6709;&#x63A5;&#x53E3;:</p>
<ul>
<li><p><code>notify(n=1)</code></p>
<p>  &#x91CA;&#x653E;&#x51FA;&#x901A;&#x77E5;,&#x8BA9;&#x4F7F;&#x7528;&#x76F8;&#x540C;Condition&#x5BF9;&#x8C61;&#x7684;&#x51E0;&#x4E2A;&#x8FC7;&#x7A0B;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x6761;&#x4EF6;&#x5DF2;&#x88AB;&#x6FC0;&#x6D3B;</p>
</li>
<li><p><code>notify_all()</code></p>
<p>  &#x91CA;&#x653E;&#x51FA;&#x901A;&#x77E5;,&#x8BA9;&#x4F7F;&#x7528;&#x76F8;&#x540C;Condition&#x5BF9;&#x8C61;&#x7684;&#x6240;&#x6709;&#x8FC7;&#x7A0B;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x6761;&#x4EF6;&#x5DF2;&#x88AB;&#x6FC0;&#x6D3B;</p>
</li>
<li><p><code>wait()</code></p>
<p>  &#x7B49;&#x5F85;&#x4F7F;&#x7528;&#x76F8;&#x540C;Condition&#x5BF9;&#x8C61;&#x7684;&#x8FC7;&#x7A0B;&#x7684;&#x901A;&#x77E5;.</p>
</li>
<li><p><code>wait_for(predicate)</code></p>
<p>  &#x76F8;&#x5F53;&#x4E8E;</p>
<pre><code class="lang-python">  <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> predicate():
      cv.wait()
</code></pre>
</li>
</ul>
<p>&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#x7B49;&#x5F85;&#x7279;&#x5B9A;&#x6761;&#x4EF6;,&#x800C;&#x53E6;&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#x53D1;&#x51FA;&#x7279;&#x5B9A;&#x6761;&#x4EF6;&#x6EE1;&#x8DB3;&#x7684;&#x4FE1;&#x53F7;.&#x6700;&#x597D;&#x8BF4;&#x660E;&#x7684;&#x4F8B;&#x5B50;&#x5C31;&#x662F;&#x300C;&#x751F;&#x4EA7;&#x8005;/&#x6D88;&#x8D39;&#x8005;&#x300D;&#x6A21;&#x578B;&#xFF1A;</p>
<p>&#x534F;&#x7A0B;&#x65B9;&#x5F0F;</p>
<pre><code>import asyncio
import functools
async def consumer(cond, name, second):
    await asyncio.sleep(second)
    async with cond:
        await cond.wait()
        print(&apos;{}: Resource is available to consumer&apos;.format(name))

async def producer(cond):
    await asyncio.sleep(2)
    async with cond:
        print(&apos;Making resource available&apos;)
        cond.notify_all()


async def main(loop):
    condition = asyncio.Condition()
    task = loop.create_task(producer(condition))
    consumers = [consumer(condition, name, index)
                 for index, name in enumerate((&apos;c1&apos;, &apos;c2&apos;))]
    await asyncio.wait(consumers)
    task.cancel()


loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
loop.run_until_complete(main(loop))
loop.close()
</code></pre><pre><code>Making resource available
c1: Resource is available to consumer
c2: Resource is available to consumer
</code></pre><p>&#x7EBF;&#x7A0B;&#x65B9;&#x5F0F;</p>
<pre><code>
import time
import threading
def consumer(cond):
    t = threading.currentThread()
    with cond:
        cond.wait()  # wait()&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;waiter&#x7684;&#x9501;&#xFF0C;
        #&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x9501;&#x7684;&#x72B6;&#x6001;&#x4E3A;locked&#x3002;&#x8FD9;&#x4E2A;waiter&#x9501;&#x7528;&#x4E8E;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x8BAF;
        print(&apos;{}: Resource is available to consumer&apos;.format(t.name))
def producer(cond):
    t = threading.currentThread()
    with cond:
        print(&apos;{}: Making resource available&apos;.format(t.name))
        cond.notify_all()  # &#x91CA;&#x653E;waiter&#x9501;&#xFF0C;&#x5524;&#x9192;&#x6D88;&#x8D39;&#x8005;
condition = threading.Condition()
c1 = threading.Thread(name=&apos;c1&apos;, target=consumer, args=(condition,))
c2 = threading.Thread(name=&apos;c2&apos;, target=consumer, args=(condition,))
p = threading.Thread(name=&apos;p&apos;, target=producer, args=(condition,))
c1.start()
time.sleep(1)
c2.start()
time.sleep(1)
p.start()
</code></pre><pre><code>p: Making resource available
c1: Resource is available to consumer
c2: Resource is available to consumer
</code></pre><p>&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;</p>
<pre><code>%%writefile src/cond.py
import time
import multiprocessing
def consumer(cond):
    t = multiprocessing.current_process()
    with cond:
        cond.wait()  # wait()&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;waiter&#x7684;&#x9501;&#xFF0C;
        #&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x9501;&#x7684;&#x72B6;&#x6001;&#x4E3A;locked&#x3002;&#x8FD9;&#x4E2A;waiter&#x9501;&#x7528;&#x4E8E;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x8BAF;
        print(&apos;{}: Resource is available to consumer&apos;.format(t.name))
def producer(cond):
    t = multiprocessing.current_process()
    with cond:
        print(&apos;{}: Making resource available&apos;.format(t.name))
        cond.notify_all()  # &#x91CA;&#x653E;waiter&#x9501;&#xFF0C;&#x5524;&#x9192;&#x6D88;&#x8D39;&#x8005;

if __name__==&apos;__main__&apos;:
    condition = multiprocessing.Condition()
    c1 = multiprocessing.Process(name=&apos;c1&apos;, target=consumer, args=(condition,))
    c2 = multiprocessing.Process(name=&apos;c2&apos;, target=consumer, args=(condition,))
    p = multiprocessing.Process(name=&apos;p&apos;, target=producer, args=(condition,))
    c1.start()
    time.sleep(1)
    c2.start()
    time.sleep(1)
    p.start()
</code></pre><pre><code>Overwriting src/cond.py
</code></pre><pre><code>!python src/cond.py
</code></pre><pre><code>p: Making resource available
c1: Resource is available to consumer
c2: Resource is available to consumer
</code></pre><h2 id="&#x961F;&#x5217;"><a name="&#x961F;&#x5217;" class="anchor-navigation-ex-anchor" href="#&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x961F;&#x5217;</h2>
<p>&#x4F7F;&#x7528;&#x961F;&#x5217;&#x662F;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x540C;&#x6B65;&#x65B9;&#x5F0F;.&#x4E5F;&#x662F;&#x751F;&#x4EA7;&#x8005;&#x6D88;&#x8D39;&#x8005;&#x6A21;&#x5F0F;&#x6700;&#x5E38;&#x89C1;&#x4F7F;&#x7528;&#x7684;&#x5DE5;&#x5177;</p>
<p>&#x961F;&#x5217;&#x7684;&#x63A5;&#x53E3;&#x6709;:</p>
<ul>
<li><code>qsize()</code></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x961F;&#x5217;&#x7684;&#x5927;&#x81F4;&#x5927;&#x5C0F;</p>
<ul>
<li><code>empty()</code></li>
</ul>
<p>&#x5982;&#x679C;&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#x8FD4;&#x56DE;True</p>
<ul>
<li><code>full()</code></li>
</ul>
<p>&#x5982;&#x679C;&#x961F;&#x5217;&#x6EE1;&#x4E86;,&#x5219;&#x8FD4;&#x56DE;&#x7A7A;</p>
<ul>
<li><code>put(item, block=True, timeout=None)</code></li>
</ul>
<p>&#x5C06;&#x5143;&#x7D20;&#x653E;&#x5165;&#x961F;&#x5217;,&#x534F;&#x7A0B;&#x4E2D;&#x662F;&#x534F;&#x7A0B;</p>
<ul>
<li><code>put_nowait(item)</code></li>
</ul>
<p>&#x7ACB;&#x5373;&#x5C06;&#x5143;&#x7D20;&#x653E;&#x5165;&#x961F;&#x5217;</p>
<ul>
<li><code>get(block=True, timeout=None)</code></li>
</ul>
<p>&#x83B7;&#x53D6;&#x5143;&#x7D20;,&#x5E76;&#x4E14;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x5220;&#x9664;&#x8BE5;&#x5143;&#x7D20;,&#x534F;&#x7A0B;&#x4E2D;&#x662F;&#x534F;&#x7A0B;</p>
<ul>
<li><code>get_nowait()</code></li>
</ul>
<p>&#x7ACB;&#x5373;&#x83B7;&#x53D6;&#x5143;&#x7D20;,&#x5E76;&#x4E14;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x5220;&#x9664;&#x8BE5;&#x5143;&#x7D20;</p>
<ul>
<li><code>task_done()</code></li>
</ul>
<p>&#x8868;&#x660E;&#x4EE5;&#x524D;&#x5165;&#x961F;&#x7684;&#x4EFB;&#x52A1;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x3002;</p>
<ul>
<li><code>join()</code></li>
</ul>
<p>&#x963B;&#x585E;&#x76F4;&#x5230;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x9879;&#x76EE;&#x90FD;&#x88AB;&#x83B7;&#x53D6;&#x548C;&#x5904;&#x7406;.&#x534F;&#x7A0B;&#x4E2D;&#x662F;&#x534F;&#x7A0B;</p>
<p>&#x5E38;&#x89C1;&#x7684;&#x961F;&#x5217;&#x6709;&#x4E24;&#x79CD;:</p>
<ul>
<li><code>queue</code></li>
</ul>
<p>&#x5148;&#x8FDB;&#x5148;&#x51FA;&#x961F;&#x5217;</p>
<ul>
<li><code>LifoQueue</code></li>
</ul>
<p>&#x5148;&#x8FDB;&#x540E;&#x51FA;&#x961F;&#x5217;</p>
<ul>
<li><code>PriorityQueue</code></li>
</ul>
<p>&#x4F18;&#x5148;&#x6743;&#x961F;&#x5217;,&#x653E;&#x5165;&#x7684;&#x5143;&#x7D20;&#x5FC5;&#x987B;&#x662F;Tuple[int,Any],&#x7B2C;&#x4E00;&#x4F4D;&#x5C31;&#x662F;&#x6743;&#x91CD;</p>
<p>&#x5BF9;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x7684;&#x961F;&#x5217;&#x4E3A;:</p>
<ul>
<li><p>&#x534F;&#x7A0B;--<code>asyncio.Queue(maxsize)</code></p>
</li>
<li><p>&#x7EBF;&#x7A0B;--<code>queue.Queue(maxsize)</code></p>
</li>
<li><p>&#x8FDB;&#x7A0B;--<code>multiprocessing.Queue(maxsize)</code></p>
</li>
</ul>
<p>&#x4F9D;&#x7136;&#x7528;&#x751F;&#x4EA7;&#x6D88;&#x8D39;&#x6A21;&#x5F0F;&#x505A;&#x4F8B;&#x5B50;</p>
<p>&#x534F;&#x7A0B;</p>
<pre><code>import asyncio
import random

def double(n):
    return n * 2

async def producer(queue, n):
    count = 0
    while True:
        if count &gt; 5:
            break
        pri = randint(0, 100)
        print(&apos;put :{}&apos;.format(pri))
        await queue.put((pri, double, pri))  # (priority, func, args)
        count += 1



async def consumer(queue):
    while True:
        pri, task, arg = await queue.get()
        print(&apos;[PRI:{}] {} * 2 = {}&apos;.format(pri, arg, task(arg)))
        await asyncio.sleep(random.random())
        queue.task_done()


async def run(n):
    queue = asyncio.PriorityQueue(10)
    # schedule the consumer
    consume = asyncio.ensure_future(consumer(queue))
    # run the producer and wait for completion
    await producer(queue, n)
    # wait until the consumer has processed all items
    await queue.join()
    # the consumer is still awaiting for an item, cancel it
    consume.cancel()

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
loop.run_until_complete(run(10))
loop.close()
</code></pre><pre><code>put :76
put :25
put :98
put :35
put :6
put :9
[PRI:6] 6 * 2 = 12
[PRI:9] 9 * 2 = 18
[PRI:25] 25 * 2 = 50
[PRI:35] 35 * 2 = 70
[PRI:76] 76 * 2 = 152
[PRI:98] 98 * 2 = 196
</code></pre><p>&#x7EBF;&#x7A0B;</p>
<pre><code>import time
import threading
from random import randint
from queue import PriorityQueue

q = PriorityQueue(10)

def double(n):
    return n * 2
def producer():
    count = 0
    while True:
        if count &gt; 5:
            break
        pri = randint(0, 100)
        print(&apos;put :{}&apos;.format(pri))
        q.put((pri, double, pri))  # (priority, func, args)
        count += 1
def consumer():
    while True:
        if q.empty():
            break
        pri, task, arg = q.get()
        print(&apos;[PRI:{}] {} * 2 = {}&apos;.format(pri, arg, task(arg)))
        q.task_done()
        time.sleep(0.1)

t = threading.Thread(target=producer)
t.start()
time.sleep(1)
t = threading.Thread(target=consumer)
t.start()
</code></pre><pre><code>put :61
put :63
put :10
put :8
put :69
put :98
[PRI:8] 8 * 2 = 16
[PRI:10] 10 * 2 = 20
[PRI:61] 61 * 2 = 122
[PRI:63] 63 * 2 = 126
[PRI:69] 69 * 2 = 138
[PRI:98] 98 * 2 = 196
</code></pre><p>&#x8FDB;&#x7A0B;</p>
<pre><code>import time
from multiprocessing import Process
from random import randint
from multiprocessing import JoinableQueue

q = JoinableQueue(10)

def double(n):
    return n * 2
def producer():
    count = 0
    while True:
        if count &gt; 5:
            break
        pri = randint(0, 100)
        print(&apos;put :{}&apos;.format(pri))
        q.put((pri, double, pri))  # (priority, func, args)
        count += 1
def consumer():
    while True:
        if q.empty():
            break
        pri, task, arg = q.get()
        print(&apos;[PRI:{}] {} * 2 = {}&apos;.format(pri, arg, task(arg)))
        q.task_done()
        time.sleep(0.1)


t = Process(target=producer)
t.start()
time.sleep(1)
t = Process(target=consumer)
t.start()
</code></pre><pre><code>put :17
put :42
put :82
put :43
put :1
put :47
[PRI:17] 17 * 2 = 34
[PRI:42] 42 * 2 = 84
[PRI:82] 82 * 2 = 164
[PRI:43] 43 * 2 = 86
[PRI:1] 1 * 2 = 2
[PRI:47] 47 * 2 = 94
</code></pre><footer class="page-footer"><span class="copyright">Copyright &#xA9; hsz 2017 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2019-01-12 02:01:49
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="多进程.html" class="navigation navigation-prev " aria-label="Previous page: 多进程">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="结语.html" class="navigation navigation-next " aria-label="Next page: 结语">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"并行编程的惯用法","level":"2.1.4.5","depth":3,"next":{"title":"结语","level":"2.1.4.6","depth":3,"path":"语法篇/流程控制/结语.md","ref":"语法篇/流程控制/结语.md","articles":[]},"previous":{"title":"多进程","level":"2.1.4.4","depth":3,"path":"语法篇/流程控制/多进程.md","ref":"语法篇/流程控制/多进程.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","advanced-emoji","github","github-buttons","mathjax","splitter","expandable-chapters-small","tbfed-pagefooter","-sharing","donate","sitemap-general","anchors","anchor-navigation-ex"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy hsz 2017","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"github":{"url":"http://blog.hszofficial.site/TutorialForPython"},"splitter":{},"search-pro":{"cutWordLib":"nodejieba","defineWord":["Gitbook Use"]},"donate":{"title":"","button":"赏","wechat":"http://blog.hszofficial.site/img/wechat_donate.jpg","alipay":"http://blog.hszofficial.site/img/zhifubao_donate.jpg","wechatText":"微信打赏","alipayText":"支付宝打赏"},"sitemap-general":{"prefix":"http://blog.hszofficial.site/TutorialForPython/"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":true},"mode":"float","multipleH1":true,"pageTop":{"showLevelIcon":false,"mode":"float","pageTop":{"showLevelIcon":false,"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right"},"level1Icon":"","showLevel":true,"level2Icon":"","level3Icon":"","associatedWithSummary":true,"float":{"showLevelIcon":true,"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right"}},"printLog":false,"showGoTop":true,"showLevel":true},"github-buttons":{"repo":"hsz1273327/TutorialForPython","types":["star","watch","fork"],"size":"small"},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"expandable-chapters-small":{},"advanced-emoji":{"embedEmojis":false},"sharing":{"weibo":false,"facebook":false,"twitter":false,"google":true,"instapaper":false,"vk":false,"all":["google"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"hsz","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"python攻略","language":"zh-hans","links":{"sidebar":{"Home":"http://blog.hszofficial.site/"}},"gitbook":">=2.0.0","description":"介绍python3.5+的语法与编程惯用法"},"file":{"path":"语法篇/流程控制/并行编程的惯用法.md","mtime":"2019-01-11T18:01:49.845Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-07-15T17:53:40.103Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

